<?xml version="1.0" encoding="UTF-8"?>
<model.view.ViewModel>
  <system>ou</system>
  <code>acl</code>
  <name>权限选择</name>
  <welcomeurl>ou/acl.cmd?$ACTION=main</welcomeurl>
  <visible>N</visible>
  <pages>
    <model.view.PageModel>
      <code>dept</code>
      <name>部门树选择</name>
      <fields>
        <model.view.FieldModel>
          <code>orgcode</code>
          <name>组织号</name>
          <ctrltype>HIDDEN</ctrltype>
          <defaults>{ORGCODE}</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>tree</code>
          <name>部门树</name>
          <ctrltype>TREE</ctrltype>
          <dict>user</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>depts</code>
      <name>组织部门树</name>
      <fields>
        <model.view.FieldModel>
          <code>tree</code>
          <name>部门树</name>
          <ctrltype>TREE</ctrltype>
          <dict>dept</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>listusers</code>
      <name>用户列表</name>
      <fields>
        <model.view.FieldModel>
          <code>orgcode</code>
          <name>组织号</name>
          <ctrltype>HIDDEN</ctrltype>
          <defaults>{ORGCODE}</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>name</code>
          <name>用户名</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>tab</code>
          <name>列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>user</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>listrole</code>
      <name>角色列表</name>
      <fields>
        <model.view.FieldModel>
          <code>orgcode</code>
          <name>组织号</name>
          <ctrltype>OPTION</ctrltype>
          <defaults>{ORGCODE}</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>name</code>
          <name>名称</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>tab</code>
          <name>角色列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>role</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>listdept</code>
      <name>部门列表</name>
      <fields>
        <model.view.FieldModel>
          <code>orgcode</code>
          <name>组织号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>name</code>
          <name>名称</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>dept</code>
          <name>部门列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>dept</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>listgroup</code>
      <name>群组列表</name>
      <fields>
        <model.view.FieldModel>
          <code>orgcode</code>
          <name>组织号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>name</code>
          <name>名称</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>tab</code>
          <name>群组列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>group</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>main</code>
      <name>主页面</name>
      <fields>
        <model.view.FieldModel>
          <code>type</code>
          <name>内容类别</name>
          <datatype>STRING</datatype>
          <ctrltype>RADIO</ctrltype>
          <defaults>user</defaults>
          <dict>rightselect</dict>
          <onclick>setSrc(this);</onclick>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>listitem</code>
          <name>选择列表</name>
          <datatype>STRING</datatype>
          <ctrltype>COMBOX</ctrltype>
          <defaults>user</defaults>
          <dict>rightlisttype</dict>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>name</code>
          <name>名称</name>
          <ctrltype>TEXT</ctrltype>
          <width>80</width>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>selectedid</code>
          <name>选择号</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>selectedvalue</code>
          <name>选择值</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>exit</code>
          <name>返回</name>
          <type>JAVASCRIPT</type>
          <showtype>BUTTON</showtype>
          <url>top.window.getDialog(window).close();</url>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>return.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>delete</code>
          <name>清除</name>
          <type>JAVASCRIPT</type>
          <showtype>BUTTON</showtype>
          <url>delSelected();</url>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>del.png</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>selectedusers</code>
          <name>授权用户</name>
          <type>JAVASCRIPT</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>query</code>
          <name>查询</name>
          <type>JAVASCRIPT</type>
          <showtype>BUTTON</showtype>
          <url>query();</url>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>queryopt.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>submit</code>
          <name>确定</name>
          <type>JAVASCRIPT</type>
          <showtype>BUTTON</showtype>
          <url>submit();</url>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>save.png</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
  </pages>
  <templets>
    <model.view.TempletModel>
      <templet>dept</templet>
      <templetname>部门树选择</templetname>
      <page>dept</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
&#xd;
function onTreeBoxClick(obj) {&#xd;
    window.parent.addSelectBox(obj,&quot;user&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>depts</templet>
      <templetname>组织部门树</templetname>
      <page>depts</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
&#xd;
function onTreeBoxClick(obj) {&#xd;
   window.parent.addSelectBox(obj,&quot;dept&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>listusers</templet>
      <templetname>用户列表</templetname>
      <page>listusers</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
function onGridBoxClick(obj) {&#xd;
    window.parent.addSelectBox(obj,&quot;user&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>listrole</templet>
      <templetname>角色列表</templetname>
      <page>listrole</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
function onGridBoxClick(obj) {&#xd;
    window.parent.addSelectBox(obj,&quot;role&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>listdept</templet>
      <templetname>部门列表</templetname>
      <page>listdept</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
function onGridBoxClick(obj) {&#xd;
    window.parent.addSelectBox(obj,&quot;dept&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>listgroup</templet>
      <templetname>群组列表</templetname>
      <page>listgroup</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
function onGridBoxClick(obj) {&#xd;
    window.parent.addSelectBox(obj,&quot;group&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>main</templet>
      <templetname>主页面</templetname>
      <page>main</page>
      <cols>6</cols>
      <style>space</style>
      <width>680</width>
      <jsfile>&lt;SCRIPT src=&quot;ou.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/SCRIPT&gt;&#xd;
&#xd;
&lt;script&gt;&#xd;
function setSrc(obj) {&#xd;
   var iframe = document.getElementById(&quot;list&quot;);&#xd;
   if (obj.value==&quot;user&quot;)&#xd;
       iframe.src = &quot;acl.cmd?$ACTION=depttree&quot;;&#xd;
   else if (obj.value==&quot;dept&quot;)&#xd;
       iframe.src = &quot;acl.cmd?$ACTION=orgdept&quot;;&#xd;
   else if (obj.value==&quot;list&quot;) {&#xd;
       query();&#xd;
   }&#xd;
}&#xd;
function query() {&#xd;
   var iframe = document.getElementById(&quot;list&quot;);&#xd;
   var name = document.getElementById(&quot;name&quot;).value;&#xd;
   var type = document.getElementById(&quot;listitem&quot;).value;&#xd;
   var url = &quot;acl.cmd?$ACTION=&quot;;&#xd;
   if (type==&quot;&quot; || type==&quot;user&quot;)&#xd;
      url += &quot;listusers&quot;;&#xd;
   else if (type==&quot;dept&quot;)&#xd;
      url += &quot;listdepts&quot;;&#xd;
   else if (type==&quot;role&quot;)&#xd;
      url += &quot;listroles&quot;;&#xd;
   else if (type==&quot;group&quot;)&#xd;
      url += &quot;listgroups&quot;;&#xd;
   else&#xd;
      url += &quot;listusers&quot;;&#xd;
   iframe.src = url + &quot;&amp;name=&quot; + name + &quot;&amp;$BOX=radio&quot;;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
  </templets>
  <control>
    <model.view.ControllerModel>
      <action>depttree</action>
      <name>部门树</name>
      <roles>LOGIN</roles>
      <exportpage>dept</exportpage>
      <mode>submit</mode>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>orgdept</action>
      <name>组织部门树</name>
      <roles>LOGIN</roles>
      <exportpage>depts</exportpage>
      <mode>submit</mode>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>listusers</action>
      <name>用户列表</name>
      <roles>LOGIN</roles>
      <exportpage>listusers</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>orgcode</string>
                <string>W</string>
              </entry>
              <entry>
                <string>name</string>
                <string>W</string>
              </entry>
              <entry>
                <string>tab</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>tab</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>rank</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>name</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>code</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>employeeno</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>listdepts</action>
      <name>部门列表</name>
      <roles>LOGIN</roles>
      <exportpage>listdept</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>orgcode</string>
                <string>W</string>
              </entry>
              <entry>
                <string>name</string>
                <string>W</string>
              </entry>
              <entry>
                <string>dept</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>dept</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>status</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>name</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>code</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>timeslice</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>listroles</action>
      <name>角色列表</name>
      <roles>LOGIN</roles>
      <exportpage>listrole</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>orgcode</string>
                <string>W</string>
              </entry>
              <entry>
                <string>name</string>
                <string>W</string>
              </entry>
              <entry>
                <string>tab</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>tab</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>name</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>code</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>roletype</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>listgroups</action>
      <name>群组列表</name>
      <roles>LOGIN</roles>
      <exportpage>listgroup</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>orgcode</string>
                <string>W</string>
              </entry>
              <entry>
                <string>name</string>
                <string>W</string>
              </entry>
              <entry>
                <string>tab</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>tab</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>name</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>code</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>type</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>main</action>
      <name>主请求</name>
      <roles>LOGIN</roles>
      <exportpage>main</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>name</string>
                <string>W</string>
              </entry>
              <entry>
                <string>listitem</string>
                <string>W</string>
              </entry>
              <entry>
                <string>type</string>
                <string>W</string>
              </entry>
              <entry>
                <string>selectedvalue</string>
                <string>W</string>
              </entry>
              <entry>
                <string>selectedid</string>
                <string>W</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>submit</string>
                <string>W</string>
              </entry>
              <entry>
                <string>selectedusers</string>
                <string>N</string>
              </entry>
              <entry>
                <string>query</string>
                <string>W</string>
              </entry>
              <entry>
                <string>delete</string>
                <string>W</string>
              </entry>
              <entry>
                <string>exit</string>
                <string>W</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable/>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
  </control>
</model.view.ViewModel>