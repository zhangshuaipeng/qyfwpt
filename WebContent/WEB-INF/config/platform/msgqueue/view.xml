<?xml version="1.0" encoding="UTF-8"?>
<model.view.ViewModel>
  <system>platform</system>
  <code>msgqueue</code>
  <name>消息队列</name>
  <flow>N</flow>
  <visible>Y</visible>
  <pages>
    <model.view.PageModel>
      <code>form</code>
      <name>表单</name>
      <metadata>EAP_MESSAGE</metadata>
      <fields>
        <model.view.FieldModel>
          <code>pk</code>
          <name>记录号</name>
          <datatype>INTEGER</datatype>
          <required>Y</required>
          <ctrltype>HIDDEN</ctrltype>
          <length>22</length>
          <width>176</width>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>msgtype</code>
          <name>消息类型</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>HIDDEN</ctrltype>
          <length>16</length>
          <width>128</width>
          <defaults>APP</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>wid</code>
          <name>原始记录号</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>HIDDEN</ctrltype>
          <length>64</length>
          <width>400</width>
          <defaults>0</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>orgcode</code>
          <name>组织号</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>HIDDEN</ctrltype>
          <length>32</length>
          <width>256</width>
          <defaults>{ORGCODE}</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>recipient</code>
          <name>接收人帐号</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>HIDDEN</ctrltype>
          <length>32</length>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>content</code>
          <name>发送内容</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>TEXTAREA</ctrltype>
          <length>1024</length>
          <height>100</height>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>sender</code>
          <name>发送人</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>READONLY</ctrltype>
          <length>32</length>
          <width>256</width>
          <defaults>{USERCODE}</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>method</code>
          <name>发送方式</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>COMBOX</ctrltype>
          <length>16</length>
          <width>128</width>
          <dict>msgsendmethod</dict>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>addr</code>
          <name>发送地址</name>
          <datatype>STRING</datatype>
          <required>N</required>
          <ctrltype>READONLY</ctrltype>
          <length>64</length>
          <width>400</width>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>result</code>
          <name>发送结果</name>
          <datatype>STRING</datatype>
          <required>Y</required>
          <ctrltype>COMBOX</ctrltype>
          <length>1</length>
          <defaults>T</defaults>
          <dict>msgsendresult</dict>
          <expkey>N</expkey>
          <unbitted>Y</unbitted>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>reasons</code>
          <name>失败原因</name>
          <datatype>STRING</datatype>
          <required>N</required>
          <ctrltype>READONLY</ctrltype>
          <length>256</length>
          <width>400</width>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>createtime</code>
          <name>提交时间</name>
          <datatype>STRING</datatype>
          <required>N</required>
          <ctrltype>READONLY</ctrltype>
          <length>19</length>
          <width>152</width>
          <defaults>{NOW}</defaults>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>sendtime</code>
          <name>发送成功时间</name>
          <datatype>STRING</datatype>
          <required>N</required>
          <ctrltype>READONLY</ctrltype>
          <length>19</length>
          <width>152</width>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>name</code>
          <name>接收人</name>
          <required>Y</required>
          <ctrltype>DICTVALUE</ctrltype>
          <width>200</width>
          <dict>useraccount</dict>
          <params>recipient</params>
          <bandaction>select</bandaction>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>select</code>
          <name>选择</name>
          <type>POPUP</type>
          <showtype>BUTTON</showtype>
          <href>USER</href>
          <display>ICONTEXT</display>
          <rets>recipient,name</rets>
          <operand>ROW</operand>
          <icon>add.png</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>save</code>
          <name>保存</name>
          <type>CUSTOM</type>
          <showtype>BUTTON</showtype>
          <href>save</href>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>save.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>exit</code>
          <name>返回</name>
          <type>CLOSE</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>ret</code>
          <name>返回</name>
          <type>URL</type>
          <showtype>BUTTON</showtype>
          <url>msgqueue.cmd?$ACTION=list</url>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>list</code>
      <name>列表</name>
      <fields>
        <model.view.FieldModel>
          <code>list</code>
          <name>列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>list</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
  </pages>
  <templets>
    <model.view.TempletModel>
      <templet>form</templet>
      <templetname>表单</templetname>
      <page>form</page>
      <cols>2</cols>
      <style>form</style>
      <width>720</width>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>list</templet>
      <templetname>列表</templetname>
      <page>list</page>
      <cols>0</cols>
      <style>list</style>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>sms</templet>
      <templetname>短信发送接口脚本</templetname>
      <page>sms</page>
      <cols>2</cols>
      <style>form</style>
      <width>720</width>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>im</templet>
      <templetname>即时通讯接口脚本</templetname>
      <page>im</page>
      <cols>2</cols>
      <style>form</style>
      <width>720</width>
    </model.view.TempletModel>
  </templets>
  <control>
    <model.view.ControllerModel>
      <action>list</action>
      <name>列表</name>
      <roles>developer</roles>
      <exportpage>list</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>developer</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>result</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>addr</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>reasons</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>recipient</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>content</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sender</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>createtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>msgtype</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>method</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sendtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions>
                    <entry>
                      <string>poll</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>delete</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>read</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>welcome</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>im</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sms</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>add</string>
                      <string>W</string>
                    </entry>
                  </actions>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>read</action>
      <name>读取</name>
      <roles>developer</roles>
      <importpage>list</importpage>
      <exportpage>form</exportpage>
      <mode>submit</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>fetch.eap_message</business>
        </model.view.HandlerModel>
      </pull>
      <right>
        <entry>
          <string>developer</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>result</string>
                <string>R</string>
              </entry>
              <entry>
                <string>wid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>addr</string>
                <string>R</string>
              </entry>
              <entry>
                <string>reasons</string>
                <string>R</string>
              </entry>
              <entry>
                <string>recipient</string>
                <string>R</string>
              </entry>
              <entry>
                <string>content</string>
                <string>R</string>
              </entry>
              <entry>
                <string>sender</string>
                <string>R</string>
              </entry>
              <entry>
                <string>createtime</string>
                <string>R</string>
              </entry>
              <entry>
                <string>orgcode</string>
                <string>W</string>
              </entry>
              <entry>
                <string>msgtype</string>
                <string>W</string>
              </entry>
              <entry>
                <string>name</string>
                <string>R</string>
              </entry>
              <entry>
                <string>method</string>
                <string>R</string>
              </entry>
              <entry>
                <string>sendtime</string>
                <string>R</string>
              </entry>
              <entry>
                <string>pk</string>
                <string>W</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>ret</string>
                <string>N</string>
              </entry>
              <entry>
                <string>save</string>
                <string>N</string>
              </entry>
              <entry>
                <string>select</string>
                <string>N</string>
              </entry>
              <entry>
                <string>exit</string>
                <string>W</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable/>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>add</action>
      <name>新增</name>
      <roles>developer</roles>
      <importpage>list</importpage>
      <exportpage>form</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>developer</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>result</string>
                <string>W</string>
              </entry>
              <entry>
                <string>wid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>addr</string>
                <string>R</string>
              </entry>
              <entry>
                <string>reasons</string>
                <string>R</string>
              </entry>
              <entry>
                <string>recipient</string>
                <string>W</string>
              </entry>
              <entry>
                <string>content</string>
                <string>W</string>
              </entry>
              <entry>
                <string>sender</string>
                <string>W</string>
              </entry>
              <entry>
                <string>createtime</string>
                <string>W</string>
              </entry>
              <entry>
                <string>orgcode</string>
                <string>W</string>
              </entry>
              <entry>
                <string>msgtype</string>
                <string>W</string>
              </entry>
              <entry>
                <string>name</string>
                <string>W</string>
              </entry>
              <entry>
                <string>method</string>
                <string>W</string>
              </entry>
              <entry>
                <string>sendtime</string>
                <string>R</string>
              </entry>
              <entry>
                <string>pk</string>
                <string>W</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>ret</string>
                <string>W</string>
              </entry>
              <entry>
                <string>save</string>
                <string>W</string>
              </entry>
              <entry>
                <string>select</string>
                <string>W</string>
              </entry>
              <entry>
                <string>exit</string>
                <string>N</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable/>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>save</action>
      <name>保存</name>
      <roles>developer</roles>
      <importpage>form</importpage>
      <exportpage>list</exportpage>
      <mode>submit</mode>
      <push>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>create.eap_message</business>
        </model.view.HandlerModel>
      </push>
      <right>
        <entry>
          <string>developer</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>result</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>addr</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>reasons</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>recipient</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>content</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sender</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>createtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>msgtype</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>method</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sendtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions>
                    <entry>
                      <string>poll</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>delete</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>read</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>welcome</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>im</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sms</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>add</string>
                      <string>W</string>
                    </entry>
                  </actions>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>delete</action>
      <name>删除</name>
      <roles>developer</roles>
      <importpage>list</importpage>
      <exportpage>list</exportpage>
      <mode>submit</mode>
      <push>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>delete.eap_message</business>
        </model.view.HandlerModel>
      </push>
      <right>
        <entry>
          <string>developer</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>result</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>addr</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>reasons</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>recipient</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>content</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sender</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>createtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>orgcode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>msgtype</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>method</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sendtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>pk</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions>
                    <entry>
                      <string>poll</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>delete</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>read</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>welcome</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>im</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>sms</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>add</string>
                      <string>W</string>
                    </entry>
                  </actions>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
  </control>
</model.view.ViewModel>