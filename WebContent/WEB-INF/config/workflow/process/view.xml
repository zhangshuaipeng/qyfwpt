<?xml version="1.0" encoding="UTF-8"?>
<model.view.ViewModel>
  <system>workflow</system>
  <code>process</code>
  <name>处理过程</name>
  <flow>N</flow>
  <welcomeurl>frame.jsp?system=workflow&amp;module=process&amp;name=log</welcomeurl>
  <visible>N</visible>
  <pages>
    <model.view.PageModel>
      <code>route</code>
      <name>路由页面</name>
      <fields>
        <model.view.FieldModel>
          <code>wid</code>
          <name>工作流水号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>title</code>
          <name>工作名称</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>node</code>
          <name>环节名称</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>routes</code>
          <name>下一环节</name>
          <required>Y</required>
          <ctrltype>JSPPAGE</ctrltype>
          <dict>routes.jsp</dict>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actor</code>
          <name>办理人</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actorname</code>
          <name>办理人</name>
          <required>Y</required>
          <ctrltype>READONLY</ctrltype>
          <width>300</width>
          <bandaction>single</bandaction>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actortype</code>
          <name>办理人类型</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>comment</code>
          <name>办理意见</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodename</code>
          <name>下一环节</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actors</code>
          <name>办理人</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>result</code>
          <name>处理结果</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>single</code>
          <name>选择</name>
          <type>POPUP</type>
          <showtype>BUTTON</showtype>
          <href>USER</href>
          <display>ICONTEXT</display>
          <rets>actor,actorname</rets>
          <operand>ROW</operand>
          <icon>add.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>submitwork</code>
          <name>提交</name>
          <type>CUSTOM</type>
          <showtype>BUTTON</showtype>
          <href>actor</href>
          <display>ICONTEXT</display>
          <args>wid,nextnodeid</args>
          <operand>FREE</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>exit</code>
          <name>返回</name>
          <type>CLOSE</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>actor</code>
      <name>选择办理人</name>
      <fields>
        <model.view.FieldModel>
          <code>wid</code>
          <name>工作实例号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>title</code>
          <name>工作标题</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>node</code>
          <name>环节名称</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodeid</code>
          <name>下一环节</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodename</code>
          <name>下一环节</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actor</code>
          <name>办理人</name>
          <required>Y</required>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actorname</code>
          <name>办理人</name>
          <required>Y</required>
          <ctrltype>TEXTAREA</ctrltype>
          <width>360</width>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actors</code>
          <name>办理人</name>
          <required>Y</required>
          <ctrltype>JSPPAGE</ctrltype>
          <dict>actors.jsp</dict>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actortype</code>
          <name>办理人类型</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>comment</code>
          <name>办理意见</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>result</code>
          <name>提交确认</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>submitwork</code>
          <name>提交</name>
          <type>CUSTOM</type>
          <showtype>BUTTON</showtype>
          <href>confirm</href>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>exit</code>
          <name>返回</name>
          <type>CLOSE</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>single</code>
          <name>选择</name>
          <type>POPUP</type>
          <showtype>BUTTON</showtype>
          <href>USER</href>
          <display>ICONTEXT</display>
          <rets>actor,actorname</rets>
          <operand>ROW</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>multi</code>
          <name>选择</name>
          <type>POPUP</type>
          <showtype>BUTTON</showtype>
          <href>USER</href>
          <display>ICONTEXT</display>
          <rets>actor,actorname</rets>
          <operand>ROWS</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>compete</code>
          <name>选择</name>
          <type>POPUP</type>
          <showtype>BUTTON</showtype>
          <href>RIGHT</href>
          <display>ICONTEXT</display>
          <rets>actor,actorname</rets>
          <operand>FREE</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>confirm</code>
      <name>确认</name>
      <fields>
        <model.view.FieldModel>
          <code>wid</code>
          <name>工作实例号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>title</code>
          <name>工作标题</name>
          <ctrltype>SPAN</ctrltype>
          <unbitted>Y</unbitted>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>node</code>
          <name>当前环节</name>
          <ctrltype>SPAN</ctrltype>
          <unbitted>Y</unbitted>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodeid</code>
          <name>下一环节</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodename</code>
          <name>下一环节</name>
          <ctrltype>SPAN</ctrltype>
          <unbitted>Y</unbitted>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actor</code>
          <name>办理人</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actorname</code>
          <name>办理人</name>
          <ctrltype>SPAN</ctrltype>
          <unbitted>Y</unbitted>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>comment</code>
          <name>办理意见</name>
          <ctrltype>SPAN</ctrltype>
          <unbitted>Y</unbitted>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>result</code>
          <name>提交确认</name>
          <ctrltype>SPAN</ctrltype>
          <defaults>您真的要提交本项工作吗?</defaults>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>submitwork</code>
          <name>提交</name>
          <type>CUSTOM</type>
          <showtype>BUTTON</showtype>
          <href>submit</href>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>teamadd.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>exit</code>
          <name>返回</name>
          <type>CLOSE</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>result</code>
      <name>提交结果</name>
      <fields>
        <model.view.FieldModel>
          <code>title</code>
          <name>工作名称</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>node</code>
          <name>提交环节</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodeid</code>
          <name>下一环节</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nextnodename</code>
          <name>下一环节</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actor</code>
          <name>办理人</name>
          <ctrltype>HIDDEN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>actorname</code>
          <name>办理人</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>comment</code>
          <name>办理意见</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>result</code>
          <name>提交结果</name>
          <ctrltype>SPAN</ctrltype>
          <defaults>工作已经成功提交!</defaults>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>exit</code>
          <name>返回</name>
          <type>CLOSE</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>canvaslog</code>
      <name>流转画布</name>
      <fields>
        <model.view.FieldModel>
          <code>instanceid</code>
          <name>流程实例号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>canvas</code>
          <name>流程图</name>
          <ctrltype>JSPPAGE</ctrltype>
          <dict>canvas.jsp</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>worklog</code>
      <name>工作日志</name>
      <fields>
        <model.view.FieldModel>
          <code>instanceid</code>
          <name>流程流转日志</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>list</code>
          <name>列表</name>
          <ctrltype>GRID</ctrltype>
          <height>560</height>
          <dict>worklog</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>comment</code>
      <name>意见</name>
      <fields>
        <model.view.FieldModel>
          <code>wid</code>
          <name>工作实例号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>instanceid</code>
          <name>流程实例号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>nodename</code>
          <name>节点名称</name>
          <ctrltype>SPAN</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>comments</code>
          <name>办理意见</name>
          <ctrltype>TEXTAREA</ctrltype>
          <height>150</height>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>list</code>
          <name>意见列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>comment</dict>
        </model.view.FieldModel>
      </fields>
      <actions>
        <model.view.ActionModel>
          <code>save</code>
          <name>保存意见</name>
          <type>CUSTOM</type>
          <showtype>BUTTON</showtype>
          <href>savecomment</href>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>save.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
        <model.view.ActionModel>
          <code>exit</code>
          <name>退出</name>
          <type>CLOSE</type>
          <showtype>BUTTON</showtype>
          <display>ICONTEXT</display>
          <operand>FREE</operand>
          <icon>exit.gif</icon>
          <target>_self</target>
        </model.view.ActionModel>
      </actions>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>threads</code>
      <name>并发工作列表</name>
      <fields>
        <model.view.FieldModel>
          <code>wid</code>
          <name>当前实例</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>list</code>
          <name>列表</name>
          <ctrltype>GRID</ctrltype>
          <width>615</width>
          <height>400</height>
          <dict>threads</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
    <model.view.PageModel>
      <code>subflow</code>
      <name>子流程</name>
      <fields>
        <model.view.FieldModel>
          <code>wid</code>
          <name>工作实例号</name>
          <ctrltype>OPTION</ctrltype>
        </model.view.FieldModel>
        <model.view.FieldModel>
          <code>list</code>
          <name>列表</name>
          <ctrltype>GRID</ctrltype>
          <dict>subflow</dict>
        </model.view.FieldModel>
      </fields>
    </model.view.PageModel>
  </pages>
  <templets>
    <model.view.TempletModel>
      <templet>route</templet>
      <templetname>路由页面</templetname>
      <page>route</page>
      <cols>2</cols>
      <style>form</style>
      <width>560</width>
      <jsfile>&lt;script&gt;&#xd;
&#xd;
function onsubmitworkClick() {&#xd;
  if (!document.getElementById(&quot;nextnodeid&quot;)) return true;&#xd;
  var selected = document.getElementsByName(&quot;nextnodeid&quot;);&#xd;
  for (var i=0;i&lt;selected.length;i++) {&#xd;
    if (selected[i].checked) {&#xd;
	return true;&#xd;
    }&#xd;
  }&#xd;
&#xd;
  alert(&quot;没有选择下一环节，请选择！&quot;);&#xd;
  return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>actor</templet>
      <templetname>选择办理人</templetname>
      <page>actor</page>
      <cols>2</cols>
      <style>form</style>
      <width>560</width>
      <jsfile>&lt;script&gt;&#xd;
&#xd;
function onsubmitworkClick() {&#xd;
    var type = document.forms[0].actortype.value;&#xd;
    if (type==&quot;radio&quot; || type==&quot;checkbox&quot; || type==&quot;right&quot; || type==&quot;lists&quot;) {&#xd;
      if (!document.getElementById(&quot;actor&quot;).value) {&#xd;
         alert(&quot;请选择办理人!&quot;);&#xd;
         return false;&#xd;
      }&#xd;
      return true;&#xd;
    }&#xd;
&#xd;
    var selected = document.getElementsByName(&quot;actor&quot;);&#xd;
    for (var i=0;i&lt;selected.length;i++) {&#xd;
      if (selected[i].checked) {&#xd;
	return true;&#xd;
      }&#xd;
    }&#xd;
&#xd;
    alert(&quot;没有选择下一环节办理人，请选择！&quot;);&#xd;
    return false;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>confirm</templet>
      <templetname>确认</templetname>
      <page>confirm</page>
      <cols>2</cols>
      <style>form</style>
      <width>560</width>
      <jsfile>&lt;script&gt;&#xd;
&#xd;
function formOnLoad() {&#xd;
   document.body.style.display = &quot;none&quot;;&#xd;
   var obj = document.getElementById(&quot;submitwork&quot;);&#xd;
   runFormCmd(obj);&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>result</templet>
      <templetname>提交结果</templetname>
      <page>result</page>
      <cols>2</cols>
      <style>form</style>
      <width>560</width>
      <jsfile>&lt;script&gt;&#xd;
&#xd;
function onexitClick() {&#xd;
   top.window.getDialog(window).getParentWindow().exitFlowView();&#xd;
return true;&#xd;
}&#xd;
&#xd;
&lt;/script&gt;</jsfile>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>canvaslog</templet>
      <templetname>流转画布</templetname>
      <page>canvaslog</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt; &#xd;
			html, body	{ height:100%; }&#xd;
			body { margin:0; padding:0; overflow:auto; text-align:center; &#xd;
			       background-color: #ffffff; }   &#xd;
			#flashContent { display:none; }&#xd;
        &lt;/style&gt;&#xd;
		&#xd;
		&lt;!-- Enable Browser History by replacing useBrowserHistory tokens with two hyphens --&gt;&#xd;
        &lt;!-- BEGIN Browser History required section --&gt;&#xd;
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../css/history.css&quot; /&gt;&#xd;
        &lt;!-- END Browser History required section --&gt;  &#xd;
        &lt;script type=&quot;text/javascript&quot; src=&quot;history.js&quot;&gt;&lt;/script&gt;&#xd;
        &lt;!-- END Browser History required section --&gt;  &#xd;
		    &#xd;
        &lt;script type=&quot;text/javascript&quot; src=&quot;swfobject.js&quot;&gt;&lt;/script&gt;&#xd;
&lt;script type=&quot;text/javascript&quot; src=&quot;flowchart.js&quot;&gt;&lt;/script&gt;</jsfile>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>worklog</templet>
      <templetname>工作日志</templetname>
      <page>worklog</page>
      <cols>0</cols>
      <style>space</style>
      <jsfile>&lt;script&gt;&#xd;
function returnForm() {&#xd;
if (!parent.window) {&#xd;
   if (parent.window.frameElement) {&#xd;
	parent.window.frameElement.src = parent.window.frameElement.src;&#xd;
	return false;&#xd;
   }&#xd;
   return false;&#xd;
}&#xd;
var dialog = top.window.getDialog(parent.window);&#xd;
if (dialog) {&#xd;
   dialog.close();&#xd;
   return false;&#xd;
}&#xd;
if (parent.window.frameElement) {&#xd;
 parent.window.frameElement.src = parent.window.frameElement.src;&#xd;
  return false;&#xd;
}&#xd;
  return false;&#xd;
&#xd;
}&#xd;
&lt;/script&gt;</jsfile>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>comment</templet>
      <templetname>意见</templetname>
      <page>comment</page>
      <cols>2</cols>
      <style>list</style>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>threads</templet>
      <templetname>并发工作列表</templetname>
      <page>threads</page>
      <cols>0</cols>
      <style>list</style>
      <html5>Y</html5>
    </model.view.TempletModel>
    <model.view.TempletModel>
      <templet>subflow</templet>
      <templetname>子流程</templetname>
      <page>subflow</page>
      <cols>0</cols>
      <style>list</style>
      <html5>Y</html5>
    </model.view.TempletModel>
  </templets>
  <control>
    <model.view.ControllerModel>
      <action>route</action>
      <name>路由选择</name>
      <roles>LOGIN</roles>
      <exportpage>route</exportpage>
      <mode>submit</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>ProcessBo.beginSubmit</business>
          <params>wid,REQ,LOGIN</params>
        </model.view.HandlerModel>
      </pull>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>routes</string>
                <string>N</string>
              </entry>
              <entry>
                <string>actors</string>
                <string>W</string>
              </entry>
              <entry>
                <string>actor</string>
                <string>N</string>
              </entry>
              <entry>
                <string>actorname</string>
                <string>N</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>single</string>
                <string>N</string>
              </entry>
              <entry>
                <string>multi</string>
                <string>N</string>
              </entry>
              <entry>
                <string>compete</string>
                <string>N</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable/>
          </model.view.RightModel>
        </entry>
      </right>
      <display>var actortype = req.getData().get(&quot;actortype&quot;);&#xd;
&#xd;
if (actortype==null || actortype==&quot;&quot;) {&#xd;
    right.getFields().put(&quot;actor&quot;,&quot;N&quot;); &#xd;
    right.getFields().put(&quot;actorname&quot;,&quot;N&quot;); &#xd;
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);&#xd;
}&#xd;
&#xd;
if (actortype==&quot;radio&quot;) {&#xd;
    right.getActions().put(&quot;multi&quot;,&quot;N&quot;);&#xd;
    right.getActions().put(&quot;compete&quot;,&quot;N&quot;);&#xd;
    right.getFields().put(&quot;actors&quot;,&quot;N&quot;);&#xd;
    right.getFields().put(&quot;actor&quot;,&quot;W&quot;); &#xd;
    right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); &#xd;
    right.getActions().put(&quot;single&quot;,&quot;W&quot;);&#xd;
}&#xd;
&#xd;
if (actortype==&quot;checkbox&quot;) {&#xd;
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);&#xd;
    right.getActions().put(&quot;compete&quot;,&quot;N&quot;);&#xd;
    right.getFields().put(&quot;actors&quot;,&quot;N&quot;);&#xd;
    right.getFields().put(&quot;actor&quot;,&quot;W&quot;); &#xd;
    right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); &#xd;
    right.getActions().put(&quot;multi&quot;,&quot;W&quot;);&#xd;
}&#xd;
&#xd;
if (actortype==&quot;right&quot;) {&#xd;
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);&#xd;
    right.getActions().put(&quot;multi&quot;,&quot;N&quot;);&#xd;
    right.getFields().put(&quot;actors&quot;,&quot;N&quot;); &#xd;
    right.getFields().put(&quot;actor&quot;,&quot;W&quot;); &#xd;
    right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); &#xd;
    right.getActions().put(&quot;compete&quot;,&quot;W&quot;);&#xd;
}&#xd;
&#xd;
if (actortype==&quot;list&quot; || actortype==&quot;lists&quot;) {&#xd;
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);&#xd;
    right.getActions().put(&quot;multi&quot;,&quot;N&quot;);&#xd;
    right.getActions().put(&quot;compete&quot;,&quot;N&quot;);&#xd;
    right.getFields().put(&quot;actor&quot;,&quot;N&quot;); &#xd;
    right.getFields().put(&quot;actorname&quot;,&quot;N&quot;); &#xd;
    right.getFields().put(&quot;actors&quot;,&quot;W&quot;);    &#xd;
}&#xd;
&#xd;
var routes = req.getData().get(&quot;routes&quot;);&#xd;
&#xd;
if (!routes) {&#xd;
    right.getFields().put(&quot;routes&quot;,&quot;N&quot;); &#xd;
} else&#xd;
    right.getFields().put(&quot;routes&quot;,&quot;W&quot;);</display>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>actor</action>
      <name>办理人选择</name>
      <roles>LOGIN</roles>
      <importpage>route</importpage>
      <exportpage>actor</exportpage>
      <mode>submit</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>ProcessBo.submitRoute</business>
          <params>wid,nextnodeid,REQ</params>
        </model.view.HandlerModel>
      </pull>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>actors</string>
                <string>W</string>
              </entry>
              <entry>
                <string>actor</string>
                <string>N</string>
              </entry>
              <entry>
                <string>actorname</string>
                <string>N</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>single</string>
                <string>N</string>
              </entry>
              <entry>
                <string>multi</string>
                <string>N</string>
              </entry>
              <entry>
                <string>compete</string>
                <string>N</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable/>
          </model.view.RightModel>
        </entry>
      </right>
      <display>var actortype = req.getData().get(&quot;actortype&quot;);

right.getFields().put(&quot;actor&quot;,&quot;W&quot;); 
right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); 
right.getFields().put(&quot;actors&quot;,&quot;W&quot;);

if (actortype==&quot;radio&quot;) {
    right.getActions().put(&quot;multi&quot;,&quot;N&quot;);
    right.getActions().put(&quot;compete&quot;,&quot;N&quot;);
    right.getFields().put(&quot;actors&quot;,&quot;N&quot;);
    right.getFields().put(&quot;actor&quot;,&quot;W&quot;); 
    right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); 
    right.getActions().put(&quot;single&quot;,&quot;W&quot;);
}

if (actortype==&quot;checkbox&quot;) {
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);
    right.getActions().put(&quot;compete&quot;,&quot;N&quot;);
    right.getFields().put(&quot;actors&quot;,&quot;N&quot;);
    right.getFields().put(&quot;actor&quot;,&quot;W&quot;); 
    right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); 
    right.getActions().put(&quot;multi&quot;,&quot;W&quot;);
}

if (actortype==&quot;right&quot;) {
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);
    right.getActions().put(&quot;multi&quot;,&quot;N&quot;);
    right.getFields().put(&quot;actors&quot;,&quot;N&quot;); 
    right.getFields().put(&quot;actor&quot;,&quot;W&quot;); 
    right.getFields().put(&quot;actorname&quot;,&quot;W&quot;); 
    right.getActions().put(&quot;compete&quot;,&quot;W&quot;);
}

if (actortype==&quot;list&quot; || actortype==&quot;lists&quot;) {
    println(actortype);
    right.getActions().put(&quot;single&quot;,&quot;N&quot;);
    right.getActions().put(&quot;multi&quot;,&quot;N&quot;);
    right.getActions().put(&quot;compete&quot;,&quot;N&quot;);
    right.getFields().put(&quot;actor&quot;,&quot;N&quot;); 
    right.getFields().put(&quot;actorname&quot;,&quot;N&quot;); 
    right.getFields().put(&quot;actors&quot;,&quot;W&quot;); 
}</display>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>confirm</action>
      <name>工作提交确认</name>
      <roles>LOGIN</roles>
      <importpage>actor</importpage>
      <exportpage>confirm</exportpage>
      <mode>submit</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>ProcessBo.submitActor</business>
          <params>wid,actor,actorname</params>
        </model.view.HandlerModel>
      </pull>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>nextnodeid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>result</string>
                <string>W</string>
              </entry>
              <entry>
                <string>title</string>
                <string>W</string>
              </entry>
              <entry>
                <string>node</string>
                <string>W</string>
              </entry>
              <entry>
                <string>wid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>actor</string>
                <string>W</string>
              </entry>
              <entry>
                <string>comment</string>
                <string>W</string>
              </entry>
              <entry>
                <string>nextnodename</string>
                <string>W</string>
              </entry>
              <entry>
                <string>actorname</string>
                <string>W</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>submitwork</string>
                <string>W</string>
              </entry>
              <entry>
                <string>exit</string>
                <string>W</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable/>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>submit</action>
      <name>工作提交结果</name>
      <roles>LOGIN</roles>
      <importpage>confirm</importpage>
      <exportpage>result</exportpage>
      <mode>submit</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>ProcessBo.submitWork</business>
          <params>wid,actor,comment</params>
        </model.view.HandlerModel>
      </pull>
      <enabletransact>Y</enabletransact>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>log</action>
      <name>日志列表</name>
      <roles>LOGIN</roles>
      <exportpage>worklog</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
              <entry>
                <string>instanceid</string>
                <string>W</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>endtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>starttime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>submitmode</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>nodename</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>assignername</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>comments</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>instanceid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>actorname</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions>
                    <entry>
                      <string>open</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>exit</string>
                      <string>W</string>
                    </entry>
                  </actions>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>canvas</action>
      <name>流程图</name>
      <roles>LOGIN</roles>
      <exportpage>canvaslog</exportpage>
      <mode>submit</mode>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>chart</action>
      <name>流程图</name>
      <roles>LOGIN</roles>
      <params>instanceid</params>
      <mode>textxml</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>StudioCache.getFlowChart</business>
          <params>instanceid</params>
        </model.view.HandlerModel>
      </pull>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>readcomment</action>
      <name>显示意见</name>
      <roles>LOGIN</roles>
      <importpage>comment</importpage>
      <exportpage>comment</exportpage>
      <mode>submit</mode>
      <pull>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>fetch.eap_todo</business>
          <params>wid</params>
        </model.view.HandlerModel>
      </pull>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>wid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>nodename</string>
                <string>W</string>
              </entry>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
              <entry>
                <string>instanceid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>comments</string>
                <string>W</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>save</string>
                <string>W</string>
              </entry>
              <entry>
                <string>exit</string>
                <string>W</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>endtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>nodename</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>instanceid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>comments</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>actorname</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>savecomment</action>
      <name>保存意见</name>
      <roles>LOGIN</roles>
      <importpage>comment</importpage>
      <exportpage>comment</exportpage>
      <mode>ajax</mode>
      <push>
        <model.view.HandlerModel>
          <fieldset>SYSTEM</fieldset>
          <business>update.eap_todo</business>
        </model.view.HandlerModel>
      </push>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>wid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>nodename</string>
                <string>W</string>
              </entry>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
              <entry>
                <string>instanceid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>comments</string>
                <string>W</string>
              </entry>
            </fields>
            <actions>
              <entry>
                <string>save</string>
                <string>W</string>
              </entry>
              <entry>
                <string>exit</string>
                <string>W</string>
              </entry>
            </actions>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>endtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>nodename</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>instanceid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>comments</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>actorname</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>threads</action>
      <name>当前并发办理工作</name>
      <roles>LOGIN</roles>
      <exportpage>threads</exportpage>
      <mode>submit</mode>
      <right>
        <entry>
          <string>LOGIN</string>
          <model.view.RightModel>
            <fields>
              <entry>
                <string>wid</string>
                <string>W</string>
              </entry>
              <entry>
                <string>list</string>
                <string>R</string>
              </entry>
            </fields>
            <actions/>
            <fieldset/>
            <subtable>
              <entry>
                <string>list</string>
                <model.view.GridRightModel>
                  <fields>
                    <entry>
                      <string>endtime</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>wid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>curwid</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>comments</string>
                      <string>W</string>
                    </entry>
                    <entry>
                      <string>actorname</string>
                      <string>W</string>
                    </entry>
                  </fields>
                  <actions/>
                </model.view.GridRightModel>
              </entry>
            </subtable>
          </model.view.RightModel>
        </entry>
      </right>
    </model.view.ControllerModel>
    <model.view.ControllerModel>
      <action>subflows</action>
      <name>子流程列表</name>
      <roles>LOGIN</roles>
      <exportpage>subflow</exportpage>
      <mode>submit</mode>
    </model.view.ControllerModel>
  </control>
  <layout>
    <model.view.LayoutModel>
      <code>log</code>
      <name>跟踪日志</name>
      <style>2U</style>
      <items>
        <model.view.LayoutItemModel>
          <index>0</index>
          <title>流程流转日志</title>
          <showheader>Y</showheader>
          <url>workflow/process.cmd?$ACTION=log</url>
          <params>instanceid</params>
          <width>640</width>
          <height>0</height>
        </model.view.LayoutItemModel>
        <model.view.LayoutItemModel>
          <index>1</index>
          <title>流转流程图</title>
          <showheader>Y</showheader>
          <url>workflow/process.cmd?$ACTION=canvas</url>
          <params>instanceid</params>
          <width>0</width>
          <height>0</height>
        </model.view.LayoutItemModel>
      </items>
    </model.view.LayoutModel>
  </layout>
</model.view.ViewModel>